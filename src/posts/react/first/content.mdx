---
title:  "react 18 update: ë¶€ë“œëŸ¬ìš´ ë Œë”ë§ê³¼ ì„±ëŠ¥ ìµœì í™”"
date: 2024-03-04
desc: ì²«ë²ˆì§¸ ì„¤ëª…
thumbnail: /react18.png
isHot: true
---

![](/react18.png)


---

## ê°œìš”

react 18 ì—…ë°ì´íŠ¸ ë‚´ìš©

âœ… Concurrent Rendering	startTransitionìœ¼ë¡œ ìš°ì„ ìˆœìœ„ ì œì–´	âœ”ï¸ ì…ë ¥ ì§€ì—° ìµœì†Œí™”
âœ… Automatic Batching	ë¹„ë™ê¸° ì´ë²¤íŠ¸ì—ì„œë„ ìƒíƒœ ì—…ë°ì´íŠ¸ ë°°ì¹­	âœ”ï¸ í•œ ë²ˆì˜ ë Œë”ë§ìœ¼ë¡œ ì²˜ë¦¬
âœ… useDeferredValue	ê°’ ë Œë”ë§ì„ ì§€ì—°í•˜ì—¬ ì„±ëŠ¥ ìµœì í™”	âœ”ï¸ ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ ìµœì í™”
âœ… useId	í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ë¶ˆì¼ì¹˜ ì—†ëŠ” ID ìƒì„±	âœ”ï¸ labelê³¼ inputì˜ ì—°ê²°
âœ… Suspense ê°œì„ 	ë°ì´í„° ë¡œë”© ì‹œ fallback ì ìš©	âœ”ï¸ Suspenseë¡œ ê°„ë‹¨í•œ ë¡œë”© ì²˜ë¦¬
 
---
## 1. concurrent rendering

ì˜ˆì œ: startTransitionì„ ì‚¬ìš©í•œ ì„±ëŠ¥ ìµœì í™”

startTransitionì„ ì‚¬ìš©í•˜ë©´ ê¸´ ë Œë”ë§ ì‘ì—…ì„ ë‚®ì€ ìš°ì„ ìˆœìœ„ë¡œ ì²˜ë¦¬í•˜ì—¬ ì…ë ¥ ì§€ì—°ì„ ë°©ì§€í•  ìˆ˜ ìˆìŒ. 

```tsx
import { useState, startTransition } from "react";

export default function App() {
  const [input, setInput] = useState("");
  const [list, setList] = useState<string[]>([]);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setInput(e.target.value);

    // ìš°ì„ ìˆœìœ„ ë‚®ì€ ìƒíƒœ ì—…ë°ì´íŠ¸ (ë¹„ë™ê¸° ë Œë”ë§)
    startTransition(() => {
      setList(new Array(20000).fill(e.target.value));
    });
  };

  return (
    <div>
      <input type="text" value={input} onChange={handleChange} />
      <ul>{list.map((item, index) => <li key={index}>{item}</li>)}</ul>
    </div>
  );
}
```

## 2. Automatic Batching (ìë™ ë°°ì¹­)

ğŸ“Œ í•µì‹¬ í¬ì¸íŠ¸:

React 17ì—ì„œëŠ” ìƒíƒœê°€ ê°ê° ì—…ë°ì´íŠ¸ë˜ë©´ì„œ ë‘ ë²ˆ ë Œë”ë§ë¨.
React 18ì—ì„œëŠ” ìë™ ë°°ì¹­ìœ¼ë¡œ í•œ ë²ˆë§Œ ë Œë”ë§ë¨.

```tsx
import { useState } from "react";

export default function App() {
  const [count, setCount] = useState(0);
  const [text, setText] = useState("");

  const handleClick = async () => {
    setCount((c) => c + 1);
    setText("Updated!");

    // React 18ì—ì„œëŠ” ì´ ë‘ ê°œê°€ í•˜ë‚˜ì˜ ë Œë”ë§ìœ¼ë¡œ ì²˜ë¦¬ë¨
  };

  return (
    <div>
      <p>Count: {count}</p>
      <p>Text: {text}</p>
      <button onClick={handleClick}>Update</button>
    </div>
  );
}
```

## 3. useDeferredValueë¥¼ ì‚¬ìš©í•œ ê°’ ì§€ì—° ì²˜ë¦¬ 
useDeferredValue(query)ëŠ” query ê°’ì˜ ë Œë”ë§ì„ ì§€ì—°ì‹œì¼œ ì…ë ¥ ì§€ì—°ì„ ìµœì†Œí™”í•¨.
ì¦‰, ì‚¬ìš©ìì˜ ì…ë ¥ì€ ì¦‰ì‹œ ë°˜ì˜ë˜ì§€ë§Œ, ë¦¬ìŠ¤íŠ¸ ë Œë”ë§ì€ ì„±ëŠ¥ì„ ê³ ë ¤í•˜ì—¬ ì¡°ê¸ˆ ëŠ¦ê²Œ ì²˜ë¦¬ë¨.

```tsx
import { useState, useDeferredValue } from "react";

export default function App() {
  const [query, setQuery] = useState("");
  const deferredQuery = useDeferredValue(query);

  return (
    <div>
      <input
        type="text"
        onChange={(e) => setQuery(e.target.value)}
        placeholder="Type something..."
      />
      <SlowList query={deferredQuery} />
    </div>
  );
}

function SlowList({ query }: { query: string }) {
  return (
    <ul>
      {new Array(20000).fill(query).map((item, index) => (
        <li key={index}>{item}</li>
      ))}
    </ul>
  );
}
```